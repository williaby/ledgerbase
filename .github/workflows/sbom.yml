name: sbom

on:
    push:
        branches: [ main ]
    pull_request:

jobs:
    sbom:
        runs-on: ubuntu-latest

        steps:
            -   uses: actions/checkout@v4

            -   name: Install Poetry
                run: curl -sSL https://install.python-poetry.org | python3 -

            -   name: Export requirements for SBOM tools
                run: poetry export --without-hashes --format=requirements.txt > requirements.txt

            -   name: Generate SBOM (example using CycloneDX)
                run: |
                    pip install cyclonedx-bom
                    cyclonedx-py -r -i requirements.txt -o sbom.xml
